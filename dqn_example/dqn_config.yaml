# To see the complete list of configurable parameters see:
# https://github.com/ray-project/ray/blob/master/rllib/agents/trainer.py
framework: "torch"
num_workers: 1
num_gpus_per_worker: 1
num_cpus_per_worker: 2
rollout_fragment_length: 16
timesteps_per_iteration: 20000
train_batch_size: 64
learning_starts: 20000
buffer_size: 5000
# "batch_mode": "complete_episodes"
lr: 0.0025
# "exploration_config": {
#   "type": "EpsilonGreedy",
#   "initial_epsilon": 1.0,
#   "final_epsilon": 0.02,
#   "epsilon_timesteps": 2000000
# }
exploration_config: {
  type: "SoftQ",
  temperature: 1.0,
}

hiddens: [256, 512]
model: {
  dim: 300,
  conv_filters: [
    [16, [5, 5], 4],
    [32, [5, 5], 2],
    [32, [5, 5], 2],
    [64, [5, 5], 1],
    [64, [5, 5], 2],
    [128, [5, 5], 2],
    [512, [5, 5], 1],
  ]
}

env_config:
  carla:
    host: "localhost"
    timeout: 30.0
    timestep: 0.05
    retries_on_error: 25
    resolution_x: 600
    resolution_y: 600
    quality_level: "Low"
    enable_map_assets: True
    enable_rendering: True
    show_display: True
    debug_mode: 1

  experiment:
    hero:
      routes: "/home/feyza/depo/research/carla_rl/rllib-integration/custom_scenario_runner/routes/failed_routes/town05_long/traffic_light_1.xml" # TODO: make this generic
      scenarios: "/home/feyza/depo/research/carla_rl/rllib-integration/custom_scenario_runner/scenarios/all_towns_traffic_scenarios_WOR.json"
      repetitions: 1
      debug_mode: 1
      ego_vehicle_type: "vehicle.lincoln.mkz2017"
      sensors:
        birdview:
          type: "sensor.birdview"
          size: 300
          radius: 15
    background_activity:
      tm_hybrid_mode: True
    town: "Town05" #"Town05_Opt"
    others:
      framestack: 4
      max_time_idle: 600
      max_time_episode: 1000 #6400